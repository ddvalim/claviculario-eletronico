from Veiculo import Veiculo
from telaVeiculo import telaVeiculo


class ControleVeiculo:

    def __init__(self):
        self.__veiculos_cadastrados = {}
        self.__tela_veiculo = telaVeiculo

    # GETTERS

    @property
    def veiculos_cadastrados(self):
        return self.__veiculos_cadastrados

    # METODOS

    def verifica_veiculo(self,placa):
        if placa in self.__veiculos_cadastrados:
            return "Veículo já cadastrado!"
        else:
            print("Veículo não está cadastrado. Deseja adicioná-lo à lista?")
            resposta = input("1 - SIM "
                      "\n 0 - NÃO")
            if resposta == 1:
                placa = input("Placa:")
                modelo = input("Modelo:")
                marca = input("Marca:")
                ano = input("Ano:")
                km = input("KM:")

                novo_veiculo = Veiculo(placa, modelo, marca, ano, km)
                self.__veiculos_cadastrados[placa] = novo_veiculo
                return novo_veiculo.placa + "foi cadastrado no sistema com sucesso!"
            else:
                return

    def adiciona_veiculo(self, veiculo:Veiculo):
        if veiculo not in self.__veiculos_cadastrados and isinstance(veiculo, Veiculo):
            self.__veiculos_cadastrados[veiculo.placa] = veiculo

    def atualiza_veiculo(self, placa_atual, placa):
        self.__veiculos_cadastrados[placa] = self.__veiculos_cadastrados.pop(placa_atual)

    def atualiza_km_veiculo(self, veiculo:Veiculo, km):
        veiculo.atualiza_km(km)
        return veiculo.km

    def deleta_veiculo(self, placa):
        self.__veiculos_cadastrados.pop(placa)